{"ast":null,"code":"/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { ClientConfigurationError } from \"../error/ClientConfigurationError\";\nimport { AuthError } from \"../error/AuthError\";\n/**\n * @hidden\n */\n\nvar BrowserStorage =\n/** @class */\nfunction () {\n  function BrowserStorage(cacheLocation) {\n    if (!window) {\n      throw AuthError.createNoWindowObjectError(\"Browser storage class could not find window object\");\n    }\n\n    var storageSupported = typeof window[cacheLocation] !== \"undefined\" && window[cacheLocation] != null;\n\n    if (!storageSupported) {\n      throw ClientConfigurationError.createStorageNotSupportedError(cacheLocation);\n    }\n\n    this.cacheLocation = cacheLocation;\n  }\n  /**\n   * add value to storage\n   * @param key\n   * @param value\n   * @param enableCookieStorage\n   */\n\n\n  BrowserStorage.prototype.setItem = function (key, value, enableCookieStorage) {\n    window[this.cacheLocation].setItem(key, value);\n\n    if (enableCookieStorage) {\n      this.setItemCookie(key, value);\n    }\n  };\n  /**\n   * get one item by key from storage\n   * @param key\n   * @param enableCookieStorage\n   */\n\n\n  BrowserStorage.prototype.getItem = function (key, enableCookieStorage) {\n    if (enableCookieStorage && this.getItemCookie(key)) {\n      return this.getItemCookie(key);\n    }\n\n    return window[this.cacheLocation].getItem(key);\n  };\n  /**\n   * remove value from storage\n   * @param key\n   */\n\n\n  BrowserStorage.prototype.removeItem = function (key) {\n    return window[this.cacheLocation].removeItem(key);\n  };\n  /**\n   * clear storage (remove all items from it)\n   */\n\n\n  BrowserStorage.prototype.clear = function () {\n    return window[this.cacheLocation].clear();\n  };\n  /**\n   * add value to cookies\n   * @param cName\n   * @param cValue\n   * @param expires\n   */\n\n\n  BrowserStorage.prototype.setItemCookie = function (cName, cValue, expires) {\n    var cookieStr = cName + \"=\" + cValue + \";path=/;\";\n\n    if (expires) {\n      var expireTime = this.getCookieExpirationTime(expires);\n      cookieStr += \"expires=\" + expireTime + \";\";\n    }\n\n    document.cookie = cookieStr;\n  };\n  /**\n   * get one item by key from cookies\n   * @param cName\n   */\n\n\n  BrowserStorage.prototype.getItemCookie = function (cName) {\n    var name = cName + \"=\";\n    var ca = document.cookie.split(\";\");\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) === \" \") {\n        c = c.substring(1);\n      }\n\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n\n    return \"\";\n  };\n  /**\n   * Clear an item in the cookies by key\n   * @param cName\n   */\n\n\n  BrowserStorage.prototype.clearItemCookie = function (cName) {\n    this.setItemCookie(cName, \"\", -1);\n  };\n  /**\n   * Get cookie expiration time\n   * @param cookieLifeDays\n   */\n\n\n  BrowserStorage.prototype.getCookieExpirationTime = function (cookieLifeDays) {\n    var today = new Date();\n    var expr = new Date(today.getTime() + cookieLifeDays * 24 * 60 * 60 * 1000);\n    return expr.toUTCString();\n  };\n\n  return BrowserStorage;\n}();\n\nexport { BrowserStorage };","map":{"version":3,"sources":["../../src/cache/BrowserStorage.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { ClientConfigurationError } from \"../error/ClientConfigurationError\";\nimport { AuthError } from \"../error/AuthError\";\n/**\n * @hidden\n */\nvar BrowserStorage = /** @class */ (function () {\n    function BrowserStorage(cacheLocation) {\n        if (!window) {\n            throw AuthError.createNoWindowObjectError(\"Browser storage class could not find window object\");\n        }\n        var storageSupported = typeof window[cacheLocation] !== \"undefined\" && window[cacheLocation] != null;\n        if (!storageSupported) {\n            throw ClientConfigurationError.createStorageNotSupportedError(cacheLocation);\n        }\n        this.cacheLocation = cacheLocation;\n    }\n    /**\n     * add value to storage\n     * @param key\n     * @param value\n     * @param enableCookieStorage\n     */\n    BrowserStorage.prototype.setItem = function (key, value, enableCookieStorage) {\n        window[this.cacheLocation].setItem(key, value);\n        if (enableCookieStorage) {\n            this.setItemCookie(key, value);\n        }\n    };\n    /**\n     * get one item by key from storage\n     * @param key\n     * @param enableCookieStorage\n     */\n    BrowserStorage.prototype.getItem = function (key, enableCookieStorage) {\n        if (enableCookieStorage && this.getItemCookie(key)) {\n            return this.getItemCookie(key);\n        }\n        return window[this.cacheLocation].getItem(key);\n    };\n    /**\n     * remove value from storage\n     * @param key\n     */\n    BrowserStorage.prototype.removeItem = function (key) {\n        return window[this.cacheLocation].removeItem(key);\n    };\n    /**\n     * clear storage (remove all items from it)\n     */\n    BrowserStorage.prototype.clear = function () {\n        return window[this.cacheLocation].clear();\n    };\n    /**\n     * add value to cookies\n     * @param cName\n     * @param cValue\n     * @param expires\n     */\n    BrowserStorage.prototype.setItemCookie = function (cName, cValue, expires) {\n        var cookieStr = cName + \"=\" + cValue + \";path=/;\";\n        if (expires) {\n            var expireTime = this.getCookieExpirationTime(expires);\n            cookieStr += \"expires=\" + expireTime + \";\";\n        }\n        document.cookie = cookieStr;\n    };\n    /**\n     * get one item by key from cookies\n     * @param cName\n     */\n    BrowserStorage.prototype.getItemCookie = function (cName) {\n        var name = cName + \"=\";\n        var ca = document.cookie.split(\";\");\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) === \" \") {\n                c = c.substring(1);\n            }\n            if (c.indexOf(name) === 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    };\n    /**\n     * Clear an item in the cookies by key\n     * @param cName\n     */\n    BrowserStorage.prototype.clearItemCookie = function (cName) {\n        this.setItemCookie(cName, \"\", -1);\n    };\n    /**\n     * Get cookie expiration time\n     * @param cookieLifeDays\n     */\n    BrowserStorage.prototype.getCookieExpirationTime = function (cookieLifeDays) {\n        var today = new Date();\n        var expr = new Date(today.getTime() + cookieLifeDays * 24 * 60 * 60 * 1000);\n        return expr.toUTCString();\n    };\n    return BrowserStorage;\n}());\nexport { BrowserStorage };\n//# sourceMappingURL=BrowserStorage.js.map"]},"metadata":{},"sourceType":"module"}